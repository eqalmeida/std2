<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="./WEB-INF/templates/templatePrincipal.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core">
    <ui:define name="top">

        <ui:include src="./WEB-INF/inc/logotipo.xhtml" />

    </ui:define>

    <ui:define name="left">
        <h:form id="fmenu">
            <p:menu>  

                <p:submenu icon="ui-icon-plus" label="Novo" >
                </p:submenu>

            </p:menu>

        </h:form>
    </ui:define>

    <ui:define name="content">
        <p:growl autoUpdate="true" id="message"/>

        <h:form>

            <p:panelGrid columns="2">
                <f:facet name="header">Simulação de Parcelamento</f:facet>
                
                <h:outputText value="Selecione um veículo"/>
                <p:selectOneMenu value="#{simulaMB.produtoId}" required="true" label="Veículo">
                    <f:selectItem itemValue="" itemLabel="" />
                    <f:selectItems value="#{simulaMB.produtos}"
                                   var="it"
                                   itemValue="#{it.id}"
                                   itemLabel="#{it.descricaoGeral}" />
                    
                    <p:ajax listener="#{simulaMB.veiculoChanged()}" update="txValorVeiculo" /> 

                </p:selectOneMenu>
                
                <h:outputText value="Valor Veículo"/>
                <p:inputText id="txValorVeiculo" value="#{simulaMB.valorVeiculo}" required="true" label="Valor Veículo"/>
                
                <h:outputText value="Selecione a Forma de Pgto"/>
                <p:selectOneMenu value="#{simulaMB.tipoId}" required="true" label="Forma Pagto">
                    <f:selectItem itemValue="" itemLabel="" />
                    <f:selectItems value="#{simulaMB.tipoPagtos}"
                                   var="it"
                                   itemValue="#{it.id}"
                                   itemLabel="#{it.descricao}" />
                    
                    <p:ajax update="tabListId" />

                </p:selectOneMenu>
                
                <h:outputText value="Selecione uma tabela"/>
                <p:selectOneMenu id="tabListId" value="#{simulaMB.tabelaId}" required="true" label="Tabela">
                    <f:selectItem itemValue="" itemLabel="" />
                    <f:selectItems value="#{simulaMB.tabelasFinanc}"
                                   var="it"
                                   itemValue="#{it.id}"
                                   itemLabel="#{it.descricao}" />

                </p:selectOneMenu>

                <h:outputText value="Valor Entrada"/>
                <p:inputText value="#{simulaMB.valorEntrada}" required="true" label="Valor Entrada"/>
                
                <h:outputText value="Valor TAC"/>
                <p:inputText value="#{simulaMB.valorTac}" required="true" label="Valor TAC"/>
                
                <f:facet name="footer">
                    <p:commandButton value="Calcular" update="@parent, :fresult" actionListener="#{simulaMB.gerar()}"/>
                </f:facet>
                
            </p:panelGrid>
        </h:form>
        
        <h:form id="fresult">
            
            <br/>
            
            <h:panelGrid columns="3" rendered="#{simulaMB.mostrar}" styleClass="prn">
                
                <f:facet name="header">Parcelas</f:facet>

                <c:forEach items="#{simulaMB.parcelas}" var="it" varStatus="rep">
                    <h:outputText value="#{it}"/>
                </c:forEach>

            </h:panelGrid>
            
        </h:form>

    </ui:define>

</ui:composition>
